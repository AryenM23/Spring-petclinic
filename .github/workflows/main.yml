name: Reflect E2E Tests

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  reflect-test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      # Stap 1: Installeer Node.js (nodig voor de Reflect CLI)
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      # Stap 2: Installeer en run Reflect
      - name: Run Reflect Tests (Docker)
        # We gebruiken direct de Docker image, geen installatie nodig
        uses: docker://reflectrun/reflect-cli:latest 
        env:
          REFLECT_API_KEY: ${{ secrets.REFLECT_API_KEY }}
        with:
          # Hier geven we de commando's mee aan de container
          # Let op de quotes bij de suite naam "Addowner"
          args: --apiKey ${{ secrets.REFLECT_API_KEY }} --suite "Addowner" --mobile=false
